import{a as v,l as k,b as y,d as g}from"./index-_QY8Rix7.js";import{u as I}from"./vue-router-D7nK3hD1.js";import{_ as B}from"./plugin-vueexport-helper-DlAUqK2U.js";import{a as C}from"./naive-ui-JkU8CFLE.js";import{r as m,h as S,x as q,o as c,c as n,u as e,J as Q,G as l,P as x,ah as w,ai as z,a as _}from"./@vue-D3pvTY_l.js";import"./pinia-kgQhn9yY.js";import"./colorthief-KyleDAT0.js";import"./axios-B4uVmeYG.js";import"./element-plus-oyuo57Ko.js";import"./@element-plus-BCXCoKlP.js";import"./@ctrl-r5W6hzzQ.js";import"./@vueuse-DNwJiFAQ.js";import"./lodash-es-BGGVqKTz.js";import"./@popperjs-D9SI2xQl.js";import"./@css-render-6k9hkExW.js";import"./css-render-BDrvWz3H.js";import"./@emotion-WldOFDRm.js";import"./seemly-B0ZdrqHg.js";import"./vooks-Bj6v0SNN.js";const f=s=>(w("data-v-ffd1c5d6"),s=s(),z(),s),N={id:"login-qrlogin"},P=f(()=>_("span",{style:{"font-size":"1.5rem"}},"扫码登录",-1)),R=f(()=>_("span",{style:{"font-size":"1rem",color:"grey"}},"请使用网易云音乐APP扫码登录",-1)),U={key:1},V={key:2},b={__name:"login",setup(s){let d=v(),h=I(),t=m(""),o=m("等待扫码"),i;S(()=>{p(),d.updateByCookie()}),q(()=>{clearInterval(i)});async function p(){let a=await k();a=a.data.data.unikey;let u=await y(a);t.value=u.data.data.qrurl,i=setInterval(()=>{g(a).then(r=>{r.data.code==800&&(clearInterval(i),o.value="二维码已失效",p()),r.data.code==801&&(o.value="等待扫码"),r.data.code==802&&(o.value="正在授权"),r.data.code==803&&(o.value="授权成功",d.updateByCookie(r.data.cookie),clearInterval(i),h.push({name:"account"}))})},3e3)}return(a,u)=>(c(),n("div",N,[P,R,e(t)!=""?(c(),Q(e(C),{key:0,value:e(t),size:200},null,8,["value"])):l("",!0),e(t)==""?(c(),n("span",U,"等待生成二维码")):l("",!0),e(t)!=""?(c(),n("span",V,x(e(o)),1)):l("",!0)]))}},te=B(b,[["__scopeId","data-v-ffd1c5d6"]]);export{te as default};
