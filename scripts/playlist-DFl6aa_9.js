import{f as S,v as C,g as N}from"./element-plus-oyuo57Ko.js";import{u as A}from"./vue-router-D7nK3hD1.js";import{u as B,r as L,p as U}from"./index-_J3eOAI9.js";import{m as M}from"./musicList-D3WgzeJc.js";import{_ as T}from"./plugin-vueexport-helper-DlAUqK2U.js";import{r as _,w as V,h as E,R as P,u as a,o as n,c,a as s,G as y,P as p,H as b,a3 as R,M as v,K as g,J as $,ak as f}from"./@vue-D3pvTY_l.js";import"./@element-plus-BCXCoKlP.js";import"./@ctrl-r5W6hzzQ.js";import"./@vueuse-DNwJiFAQ.js";import"./lodash-es-BGGVqKTz.js";import"./@popperjs-D9SI2xQl.js";import"./pinia-kgQhn9yY.js";import"./colorthief-KyleDAT0.js";import"./axios-B4uVmeYG.js";import"./naive-ui-JkU8CFLE.js";import"./@css-render-6k9hkExW.js";import"./css-render-BDrvWz3H.js";import"./@emotion-WldOFDRm.js";import"./seemly-B0ZdrqHg.js";import"./vooks-Bj6v0SNN.js";const z={id:"playlistDetail"},F=["src"],G={id:"playlistInfo"},H={id:"playlistName"},J={key:0,id:"playlistAuthor"},K=["src"],O={id:"playlistAuthorName"},j={id:"playlistTagContainer"},q={id:"playlistDesc"},Q={id:"playlistControler"},W={id:"playlistMusicList"},X={__name:"playlist",props:["id","isDailySongs"],setup(h){const l=B(),m=A();let o=_(!1),t=_([]),d=h;V(d,()=>{t.value={},u()},{deep:!0}),E(()=>{u()});async function u(){if(d.isDailySongs){let e=await L(),i=new Date;t.value={tracks:e.data.data.dailySongs,name:`${i.getMonth()+1}/${i.getDate()} 每日推荐`,description:"根据你的音乐口味生成，每天06:00更新",coverImgUrl:e.data.data.dailySongs[0].al.picUrl,tags:["每日推荐"]}}else{let e=await U(d.id);t.value=e.data.playlist}}async function k(){o.value=!0,await l.playlistInit(t.value.tracks.map(e=>e.id)),o.value=!1,m.push({name:"player"})}async function I(e){o.value=!0;let i=l.playlistIds,r=l.playlistIndex;i.splice(r,0,e),console.log("单独插入播放",i,e,r),await l.playlistInit(i),l.playlistIndex=r,o.value=!1,m.push({name:"player"})}return(e,i)=>{const r=N,w=S,D=C;return P((n(),c("div",null,[s("div",z,[a(t).coverImgUrl?(n(),c("img",{key:0,id:"playlistImg",src:a(t).coverImgUrl},null,8,F)):y("",!0),s("div",G,[s("div",H,p(a(t).name),1),a(t).creator?(n(),c("div",J,[s("img",{id:"playlistAuthorAvatar",src:a(t).creator.avatarUrl},null,8,K),s("div",O,p(a(t).creator.nickname),1),s("span",j,[(n(!0),c(b,null,R(a(t).tags,x=>(n(),$(r,{type:"success",size:"small",class:"playlistTag"},{default:g(()=>[f(p(x),1)]),_:2},1024))),256))])])):y("",!0),s("div",q,p(a(t).description),1),s("div",Q,[v(w,{onClick:k},{default:g(()=>[f("播放全部")]),_:1})])])]),s("div",W,[v(M,{value:a(t).tracks,nameOnClick:I},null,8,["value"])])])),[[D,!a(t).tracks|a(o),void 0,{fullscreen:!0}]])}}},ft=T(X,[["__scopeId","data-v-e03129bd"]]);export{ft as default};
