import{u as h,b as k,d as y,e as g}from"./index-C1sYJK0J.js";import{u as I}from"./vue-router-DG80t9WM.js";import{_ as B}from"./plugin-vueexport-helper-DlAUqK2U.js";import{a as C}from"./naive-ui-D592rHB_.js";import{r as m,f as S,x as q,o as c,c as n,u as e,J as Q,G as d,P as x,ah as w,ai as z,a as _}from"./@vue-D_0RU2Tl.js";import"./pinia-BPHYnNsg.js";import"./colorthief-KyleDAT0.js";import"./axios-B4uVmeYG.js";import"./element-plus-CohCRYw0.js";import"./@element-plus-ChLHN-JF.js";import"./@ctrl-r5W6hzzQ.js";import"./@vueuse-BHQltXxO.js";import"./lodash-es-BZZZw3H7.js";import"./@popperjs-D9SI2xQl.js";import"./seemly-DmzweY-y.js";import"./@css-render-DWdI-o_L.js";import"./css-render-BDrvWz3H.js";import"./@emotion-WldOFDRm.js";import"./vooks-CX8wCwuJ.js";const f=s=>(w("data-v-ffd1c5d6"),s=s(),z(),s),N={id:"login-qrlogin"},P=f(()=>_("span",{style:{"font-size":"1.5rem"}},"扫码登录",-1)),R=f(()=>_("span",{style:{"font-size":"1rem",color:"grey"}},"请使用网易云音乐APP扫码登录",-1)),U={key:1},V={key:2},b={__name:"login",setup(s){let l=h(),v=I(),t=m(""),o=m("等待扫码"),i;S(()=>{p(),l.updateByCookie()}),q(()=>{clearInterval(i)});async function p(){let a=await k();a=a.data.data.unikey;let u=await y(a);t.value=u.data.data.qrurl,i=setInterval(()=>{g(a).then(r=>{r.data.code==800&&(clearInterval(i),o.value="二维码已失效",p()),r.data.code==801&&(o.value="等待扫码"),r.data.code==802&&(o.value="正在授权"),r.data.code==803&&(o.value="授权成功",l.updateByCookie(r.data.cookie),clearInterval(i),v.push({name:"account"}))})},3e3)}return(a,u)=>(c(),n("div",N,[P,R,e(t)!=""?(c(),Q(e(C),{key:0,value:e(t),size:200},null,8,["value"])):d("",!0),e(t)==""?(c(),n("span",U,"等待生成二维码")):d("",!0),e(t)!=""?(c(),n("span",V,x(e(o)),1)):d("",!0)]))}},te=B(b,[["__scopeId","data-v-ffd1c5d6"]]);export{te as default};
