import{r as B,bC as J,w as z,o as q,b as X,bh as S,aX as w,Y as _,Z as C,b1 as W,A as ct,F as mt,ar as xt,D as F,aY as vt,bD as bt,a1 as et,bE as yt,P as Z,x as wt,E as O,bF as $t,bG as Mt,R as gt,U as zt}from"./index-CXOPteNE.js";let Y=[];const nt=new WeakMap;function It(){Y.forEach(n=>n(...nt.get(n))),Y=[]}function Bt(n,...t){nt.set(n,t),!Y.includes(n)&&Y.push(n)===1&&requestAnimationFrame(It)}function At(n){const t=B(!!n.value);if(t.value)return J(t);const e=z(n,o=>{o&&(t.value=!0,e())});return J(t)}const Et=typeof window<"u";let g,I;const Ct=()=>{var n,t;g=Et?(t=(n=document)===null||n===void 0?void 0:n.fonts)===null||t===void 0?void 0:t.ready:void 0,I=!1,g!==void 0?g.then(()=>{I=!0}):I=!0};Ct();function Zt(n){if(I)return;let t=!1;q(()=>{I||g==null||g.then(()=>{t||n()})}),X(()=>{t=!0})}const Ot=S("n-internal-select-menu-body"),Yt=S("n-modal-body"),Xt=S("n-drawer-body"),St=S("n-popover-body"),ot="__disabled__";function rt(n){const t=w(Yt,null),e=w(Xt,null),o=w(St,null),r=w(Ot,null),h=B();if(typeof document<"u"){h.value=document.fullscreenElement;const d=()=>{h.value=document.fullscreenElement};q(()=>{_("fullscreenchange",document,d)}),X(()=>{C("fullscreenchange",document,d)})}return W(()=>{var d;const{to:f}=n;return f!==void 0?f===!1?ot:f===!0?h.value||"body":f:t!=null&&t.value?(d=t.value.$el)!==null&&d!==void 0?d:t.value:e!=null&&e.value?e.value:o!=null&&o.value?o.value:r!=null&&r.value?r.value:f??(h.value||"body")})}rt.tdkey=ot;rt.propTo={type:[String,Object,Boolean],default:void 0};function k(n,t,e="default"){const o=t[e];if(o===void 0)throw new Error(`[vueuc/${n}]: slot[${e}] is empty.`);return o()}function P(n,t=!0,e=[]){return n.forEach(o=>{if(o!==null){if(typeof o!="object"){(typeof o=="string"||typeof o=="number")&&e.push(ct(String(o)));return}if(Array.isArray(o)){P(o,t,e);return}if(o.type===mt){if(o.children===null)return;Array.isArray(o.children)&&P(o.children,t,e)}else o.type!==xt&&e.push(o)}}),e}function Q(n,t,e="default"){const o=t[e];if(o===void 0)throw new Error(`[vueuc/${n}]: slot[${e}] is empty.`);const r=P(o());if(r.length===1)return r[0];throw new Error(`[vueuc/${n}]: slot[${e}] should have exactly one child.`)}let y=null;function it(){if(y===null&&(y=document.getElementById("v-binder-view-measurer"),y===null)){y=document.createElement("div"),y.id="v-binder-view-measurer";const{style:n}=y;n.position="fixed",n.left="0",n.right="0",n.top="0",n.bottom="0",n.pointerEvents="none",n.visibility="hidden",document.body.appendChild(y)}return y.getBoundingClientRect()}function Ft(n,t){const e=it();return{top:t,left:n,height:0,width:0,right:e.width-n,bottom:e.height-t}}function j(n){const t=n.getBoundingClientRect(),e=it();return{left:t.left-e.left,top:t.top-e.top,bottom:e.height+e.top-t.bottom,right:e.width+e.left-t.right,width:t.width,height:t.height}}function Vt(n){return n.nodeType===9?null:n.parentNode}function st(n){if(n===null)return null;const t=Vt(n);if(t===null)return null;if(t.nodeType===9)return document;if(t.nodeType===1){const{overflow:e,overflowX:o,overflowY:r}=getComputedStyle(t);if(/(auto|scroll|overlay)/.test(e+r+o))return t}return st(t)}const Jt=F({name:"Binder",props:{syncTargetWithParent:Boolean,syncTarget:{type:Boolean,default:!0}},setup(n){var t;vt("VBinder",(t=bt())===null||t===void 0?void 0:t.proxy);const e=w("VBinder",null),o=B(null),r=s=>{o.value=s,e&&n.syncTargetWithParent&&e.setTargetRef(s)};let h=[];const d=()=>{let s=o.value;for(;s=st(s),s!==null;)h.push(s);for(const x of h)_("scroll",x,v,!0)},f=()=>{for(const s of h)C("scroll",s,v,!0);h=[]},l=new Set,m=s=>{l.size===0&&d(),l.has(s)||l.add(s)},b=s=>{l.has(s)&&l.delete(s),l.size===0&&f()},v=()=>{Bt(i)},i=()=>{l.forEach(s=>s())},u=new Set,p=s=>{u.size===0&&_("resize",window,c),u.has(s)||u.add(s)},a=s=>{u.has(s)&&u.delete(s),u.size===0&&C("resize",window,c)},c=()=>{u.forEach(s=>s())};return X(()=>{C("resize",window,c),f()}),{targetRef:o,setTargetRef:r,addScrollListener:m,removeScrollListener:b,addResizeListener:p,removeResizeListener:a}},render(){return k("binder",this.$slots)}}),Qt=F({name:"Target",setup(){const{setTargetRef:n,syncTarget:t}=w("VBinder");return{syncTarget:t,setTargetDirective:{mounted:n,updated:n}}},render(){const{syncTarget:n,setTargetDirective:t}=this;return n?et(Q("follower",this.$slots),[[t]]):Q("follower",this.$slots)}});function Tt(n,t){console.error(`[vdirs/${n}]: ${t}`)}class jt{constructor(){this.elementZIndex=new Map,this.nextZIndex=2e3}get elementCount(){return this.elementZIndex.size}ensureZIndex(t,e){const{elementZIndex:o}=this;if(e!==void 0){t.style.zIndex=`${e}`,o.delete(t);return}const{nextZIndex:r}=this;o.has(t)&&o.get(t)+1===this.nextZIndex||(t.style.zIndex=`${r}`,o.set(t,r),this.nextZIndex=r+1,this.squashState())}unregister(t,e){const{elementZIndex:o}=this;o.has(t)?o.delete(t):e===void 0&&Tt("z-index-manager/unregister-element","Element not found when unregistering."),this.squashState()}squashState(){const{elementCount:t}=this;t||(this.nextZIndex=2e3),this.nextZIndex-t>2500&&this.rearrange()}rearrange(){const t=Array.from(this.elementZIndex.entries());t.sort((e,o)=>e[1]-o[1]),this.nextZIndex=2e3,t.forEach(e=>{const o=e[0],r=this.nextZIndex++;`${r}`!==o.style.zIndex&&(o.style.zIndex=`${r}`)})}}const D=new jt,M="@@ziContext",Dt={mounted(n,t){const{value:e={}}=t,{zIndex:o,enabled:r}=e;n[M]={enabled:!!r,initialized:!1},r&&(D.ensureZIndex(n,o),n[M].initialized=!0)},updated(n,t){const{value:e={}}=t,{zIndex:o,enabled:r}=e,h=n[M].enabled;r&&!h&&(D.ensureZIndex(n,o),n[M].initialized=!0),n[M].enabled=!!r},unmounted(n,t){if(!n[M].initialized)return;const{value:e={}}=t,{zIndex:o}=e;D.unregister(n,o)}},{c:A}=yt(),Lt="vueuc-style",_t=F({name:"LazyTeleport",props:{to:{type:[String,Object],default:void 0},disabled:Boolean,show:{type:Boolean,required:!0}},setup(n){return{showTeleport:At(Z(n,"show")),mergedTo:wt(()=>{const{to:t}=n;return t??"body"})}},render(){return this.showTeleport?this.disabled?k("lazy-teleport",this.$slots):O($t,{disabled:this.disabled,to:this.mergedTo},k("lazy-teleport",this.$slots)):null}}),E={top:"bottom",bottom:"top",left:"right",right:"left"},N={start:"end",center:"center",end:"start"},L={top:"height",bottom:"height",left:"width",right:"width"},Wt={"bottom-start":"top left",bottom:"top center","bottom-end":"top right","top-start":"bottom left",top:"bottom center","top-end":"bottom right","right-start":"top left",right:"center left","right-end":"bottom left","left-start":"top right",left:"center right","left-end":"bottom right"},kt={"bottom-start":"bottom left",bottom:"bottom center","bottom-end":"bottom right","top-start":"top left",top:"top center","top-end":"top right","right-start":"top right",right:"center right","right-end":"bottom right","left-start":"top left",left:"center left","left-end":"bottom left"},Pt={"bottom-start":"right","bottom-end":"left","top-start":"right","top-end":"left","right-start":"bottom","right-end":"top","left-start":"bottom","left-end":"top"},R={top:!0,bottom:!1,left:!0,right:!1},tt={top:"end",bottom:"start",left:"end",right:"start"};function qt(n,t,e,o,r,h){if(!r||h)return{placement:n,top:0,left:0};const[d,f]=n.split("-");let l=f??"center",m={top:0,left:0};const b=(u,p,a)=>{let c=0,s=0;const x=e[u]-t[p]-t[u];return x>0&&o&&(a?s=R[p]?x:-x:c=R[p]?x:-x),{left:c,top:s}},v=d==="left"||d==="right";if(l!=="center"){const u=Pt[n],p=E[u],a=L[u];if(e[a]>t[a]){if(t[u]+t[a]<e[a]){const c=(e[a]-t[a])/2;t[u]<c||t[p]<c?t[u]<t[p]?(l=N[f],m=b(a,p,v)):m=b(a,u,v):l="center"}}else e[a]<t[a]&&t[p]<0&&t[u]>t[p]&&(l=N[f])}else{const u=d==="bottom"||d==="top"?"left":"top",p=E[u],a=L[u],c=(e[a]-t[a])/2;(t[u]<c||t[p]<c)&&(t[u]>t[p]?(l=tt[u],m=b(a,u,v)):(l=tt[p],m=b(a,p,v)))}let i=d;return t[d]<e[L[d]]&&t[d]<t[E[d]]&&(i=E[d]),{placement:l!=="center"?`${i}-${l}`:i,left:m.left,top:m.top}}function Kt(n,t){return t?kt[n]:Wt[n]}function Ut(n,t,e,o,r,h){if(h)switch(n){case"bottom-start":return{top:`${Math.round(e.top-t.top+e.height)}px`,left:`${Math.round(e.left-t.left)}px`,transform:"translateY(-100%)"};case"bottom-end":return{top:`${Math.round(e.top-t.top+e.height)}px`,left:`${Math.round(e.left-t.left+e.width)}px`,transform:"translateX(-100%) translateY(-100%)"};case"top-start":return{top:`${Math.round(e.top-t.top)}px`,left:`${Math.round(e.left-t.left)}px`,transform:""};case"top-end":return{top:`${Math.round(e.top-t.top)}px`,left:`${Math.round(e.left-t.left+e.width)}px`,transform:"translateX(-100%)"};case"right-start":return{top:`${Math.round(e.top-t.top)}px`,left:`${Math.round(e.left-t.left+e.width)}px`,transform:"translateX(-100%)"};case"right-end":return{top:`${Math.round(e.top-t.top+e.height)}px`,left:`${Math.round(e.left-t.left+e.width)}px`,transform:"translateX(-100%) translateY(-100%)"};case"left-start":return{top:`${Math.round(e.top-t.top)}px`,left:`${Math.round(e.left-t.left)}px`,transform:""};case"left-end":return{top:`${Math.round(e.top-t.top+e.height)}px`,left:`${Math.round(e.left-t.left)}px`,transform:"translateY(-100%)"};case"top":return{top:`${Math.round(e.top-t.top)}px`,left:`${Math.round(e.left-t.left+e.width/2)}px`,transform:"translateX(-50%)"};case"right":return{top:`${Math.round(e.top-t.top+e.height/2)}px`,left:`${Math.round(e.left-t.left+e.width)}px`,transform:"translateX(-100%) translateY(-50%)"};case"left":return{top:`${Math.round(e.top-t.top+e.height/2)}px`,left:`${Math.round(e.left-t.left)}px`,transform:"translateY(-50%)"};case"bottom":default:return{top:`${Math.round(e.top-t.top+e.height)}px`,left:`${Math.round(e.left-t.left+e.width/2)}px`,transform:"translateX(-50%) translateY(-100%)"}}switch(n){case"bottom-start":return{top:`${Math.round(e.top-t.top+e.height+o)}px`,left:`${Math.round(e.left-t.left+r)}px`,transform:""};case"bottom-end":return{top:`${Math.round(e.top-t.top+e.height+o)}px`,left:`${Math.round(e.left-t.left+e.width+r)}px`,transform:"translateX(-100%)"};case"top-start":return{top:`${Math.round(e.top-t.top+o)}px`,left:`${Math.round(e.left-t.left+r)}px`,transform:"translateY(-100%)"};case"top-end":return{top:`${Math.round(e.top-t.top+o)}px`,left:`${Math.round(e.left-t.left+e.width+r)}px`,transform:"translateX(-100%) translateY(-100%)"};case"right-start":return{top:`${Math.round(e.top-t.top+o)}px`,left:`${Math.round(e.left-t.left+e.width+r)}px`,transform:""};case"right-end":return{top:`${Math.round(e.top-t.top+e.height+o)}px`,left:`${Math.round(e.left-t.left+e.width+r)}px`,transform:"translateY(-100%)"};case"left-start":return{top:`${Math.round(e.top-t.top+o)}px`,left:`${Math.round(e.left-t.left+r)}px`,transform:"translateX(-100%)"};case"left-end":return{top:`${Math.round(e.top-t.top+e.height+o)}px`,left:`${Math.round(e.left-t.left+r)}px`,transform:"translateX(-100%) translateY(-100%)"};case"top":return{top:`${Math.round(e.top-t.top+o)}px`,left:`${Math.round(e.left-t.left+e.width/2+r)}px`,transform:"translateY(-100%) translateX(-50%)"};case"right":return{top:`${Math.round(e.top-t.top+e.height/2+o)}px`,left:`${Math.round(e.left-t.left+e.width+r)}px`,transform:"translateY(-50%)"};case"left":return{top:`${Math.round(e.top-t.top+e.height/2+o)}px`,left:`${Math.round(e.left-t.left+r)}px`,transform:"translateY(-50%) translateX(-100%)"};case"bottom":default:return{top:`${Math.round(e.top-t.top+e.height+o)}px`,left:`${Math.round(e.left-t.left+e.width/2+r)}px`,transform:"translateX(-50%)"}}}const Gt=A([A(".v-binder-follower-container",{position:"absolute",left:"0",right:"0",top:"0",height:"0",pointerEvents:"none",zIndex:"auto"}),A(".v-binder-follower-content",{position:"absolute",zIndex:"auto"},[A("> *",{pointerEvents:"all"})])]),Nt=F({name:"Follower",inheritAttrs:!1,props:{show:Boolean,enabled:{type:Boolean,default:void 0},placement:{type:String,default:"bottom"},syncTrigger:{type:Array,default:["resize","scroll"]},to:[String,Object],flip:{type:Boolean,default:!0},internalShift:Boolean,x:Number,y:Number,width:String,minWidth:String,containerClass:String,teleportDisabled:Boolean,zindexable:{type:Boolean,default:!0},zIndex:Number,overlap:Boolean},setup(n){const t=w("VBinder"),e=W(()=>n.enabled!==void 0?n.enabled:n.show),o=B(null),r=B(null),h=()=>{const{syncTrigger:i}=n;i.includes("scroll")&&t.addScrollListener(l),i.includes("resize")&&t.addResizeListener(l)},d=()=>{t.removeScrollListener(l),t.removeResizeListener(l)};q(()=>{e.value&&(l(),h())});const f=Mt();Gt.mount({id:"vueuc/binder",head:!0,anchorMetaName:Lt,ssr:f}),X(()=>{d()}),Zt(()=>{e.value&&l()});const l=()=>{if(!e.value)return;const i=o.value;if(i===null)return;const u=t.targetRef,{x:p,y:a,overlap:c}=n,s=p!==void 0&&a!==void 0?Ft(p,a):j(u);i.style.setProperty("--v-target-width",`${Math.round(s.width)}px`),i.style.setProperty("--v-target-height",`${Math.round(s.height)}px`);const{width:x,minWidth:V,placement:K,internalShift:lt,flip:ut}=n;i.setAttribute("v-placement",K),c?i.setAttribute("v-overlap",""):i.removeAttribute("v-overlap");const{style:$}=i;x==="target"?$.width=`${s.width}px`:x!==void 0?$.width=x:$.width="",V==="target"?$.minWidth=`${s.width}px`:V!==void 0?$.minWidth=V:$.minWidth="";const dt=j(i),at=j(r.value),{left:U,top:G,placement:T}=qt(K,s,dt,lt,ut,c),H=Kt(T,c),{left:ht,top:pt,transform:ft}=Ut(T,at,s,G,U,c);i.setAttribute("v-placement",T),i.style.setProperty("--v-offset-left",`${Math.round(U)}px`),i.style.setProperty("--v-offset-top",`${Math.round(G)}px`),i.style.transform=`translateX(${ht}) translateY(${pt}) ${ft}`,i.style.setProperty("--v-transform-origin",H),i.style.transformOrigin=H};z(e,i=>{i?(h(),m()):d()});const m=()=>{gt().then(l).catch(i=>console.error(i))};["placement","x","y","internalShift","flip","width","overlap","minWidth"].forEach(i=>{z(Z(n,i),l)}),["teleportDisabled"].forEach(i=>{z(Z(n,i),m)}),z(Z(n,"syncTrigger"),i=>{i.includes("resize")?t.addResizeListener(l):t.removeResizeListener(l),i.includes("scroll")?t.addScrollListener(l):t.removeScrollListener(l)});const b=zt(),v=W(()=>{const{to:i}=n;if(i!==void 0)return i;b.value});return{VBinder:t,mergedEnabled:e,offsetContainerRef:r,followerRef:o,mergedTo:v,syncPosition:l}},render(){return O(_t,{show:this.show,to:this.mergedTo,disabled:this.teleportDisabled},{default:()=>{var n,t;const e=O("div",{class:["v-binder-follower-container",this.containerClass],ref:"offsetContainerRef"},[O("div",{class:"v-binder-follower-content",ref:"followerRef"},(t=(n=this.$slots).default)===null||t===void 0?void 0:t.call(n))]);return this.zindexable?et(e,[[Dt,{enabled:this.mergedEnabled,zIndex:this.zIndex}]]):e}})}});export{Jt as B,Qt as V,Nt as a,Xt as d,Yt as m,St as p,rt as u,Dt as z};
