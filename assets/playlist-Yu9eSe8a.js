import{I as B,a3 as C,r as g,w as N,o as U,av as A,aw as L,K as l,L as i,P as s,M as a,V as r,Q as c,Z as M,_ as V,O as p,R as d,U as P,a5 as m,ae as T}from"./index-Bf3o3SW5.js";import{m as b,_ as z}from"./musicList-P45K-LiO.js";import{_ as O}from"./plugin-vueexport-helper-BZKo6wsw.js";import{B as R}from"./Button-bu-taDYt.js";import{_ as $}from"./Ellipsis-BXfB_ttU.js";import"./use-compitable-BMo79OkL.js";import"./heart-outlined-D7XMHqcI.js";import"./Card-BIpHoTzz.js";import"./Follower-BnTPvjqB.js";import"./index-BQ8m1GQG.js";const E={key:"playlst-content"},F={class:"playlistDetail"},K={key:0,class:"playlistImg"},Q=["src"],Z={class:"playlistInfo"},j={class:"playlistName playlist-info-item"},q={key:0,class:"playlistAuthor playlist-info-item"},G=["src"],H={class:"playlistAuthorName"},J={class:"playlistTagContainer"},W={class:"playlist-desc playlist-info-item"},X={class:"playlistControler playlist-info-item"},Y={id:"playlistMusicList"},tt={class:"playlist-spin",key:"playlst-spin"},st={__name:"playlist",props:["id","isDailySongs"],setup(f){const n=B(),y=C();let o=g(!1),t=g([]),_=f;N(_,()=>{console.log("playlist组件props被更新"),t.value={},v()},{deep:!0}),U(()=>{console.log("playlist组件被挂载"),v()});async function v(){if(_.isDailySongs){let e=await A(),u=new Date;t.value={tracks:e.data.data.dailySongs,name:`${u.getMonth()+1}/${u.getDate()} 每日推荐`,description:"根据你的音乐口味生成，每天06:00更新",coverImgUrl:e.data.data.dailySongs[0].al.picUrl,tags:["每日推荐"]}}else{let e=await L(_.id);t.value=e.data.playlist}}async function h(){o.value=!0,await n.playlistInit(null,t.value.tracks),n.play(!0),y.push({name:"player"}),o.value=!1}async function k(e){o.value=!0,await n.addMusic([e],0,!0),n.play(!0),y.push({name:"player"}),o.value=!1}return(e,u)=>{const w=T,I=$,S=R,D=z;return l(),i("div",null,[s(t).tracks&&!s(o)?(l(),i("div",E,[a("div",F,[s(t).coverImgUrl?(l(),i("div",K,[a("img",{src:s(t).coverImgUrl},null,8,Q)])):r("",!0),a("div",Z,[a("div",j,c(s(t).name),1),s(t).creator?(l(),i("div",q,[a("img",{class:"playlistAuthorAvatar",src:s(t).creator.avatarUrl},null,8,G),a("div",H,c(s(t).creator.nickname),1),a("span",J,[(l(!0),i(M,null,V(s(t).tags,x=>(l(),P(w,{type:"success",size:"small",class:"playlistTag"},{default:d(()=>[m(c(x),1)]),_:2},1024))),256))])])):r("",!0),a("div",W,[p(I,{style:{"max-width":"100%"},"line-clamp":3},{default:d(()=>[m(c(s(t).description),1)]),_:1})]),a("div",X,[p(S,{onClick:h},{default:d(()=>[m("播放全部")]),_:1})])])]),a("div",Y,[p(b,{value:s(t).tracks,nameOnClick:k},null,8,["value"])])])):r("",!0),!s(t).tracks||s(o)?(l(),i("div",tt,[p(D,{size:"large"})])):r("",!0)])}}},ut=O(st,[["__scopeId","data-v-043eab52"]]);export{ut as default};
