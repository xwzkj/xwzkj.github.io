{"version":3,"file":"musicList--0Am0Kld.js","sources":["../../node_modules/naive-ui/es/spin/styles/light.mjs","../../node_modules/naive-ui/es/spin/src/styles/index.cssr.mjs","../../node_modules/naive-ui/es/spin/src/Spin.mjs","../../src/components/musicList.vue"],"sourcesContent":["import { commonLight } from \"../../_styles/common/index.mjs\";\nexport const self = vars => {\n  const {\n    opacityDisabled,\n    heightTiny,\n    heightSmall,\n    heightMedium,\n    heightLarge,\n    heightHuge,\n    primaryColor,\n    fontSize\n  } = vars;\n  return {\n    fontSize,\n    textColor: primaryColor,\n    sizeTiny: heightTiny,\n    sizeSmall: heightSmall,\n    sizeMedium: heightMedium,\n    sizeLarge: heightLarge,\n    sizeHuge: heightHuge,\n    color: primaryColor,\n    opacitySpinning: opacityDisabled\n  };\n};\nconst spinLight = {\n  name: 'Spin',\n  common: commonLight,\n  self\n};\nexport default spinLight;","import { c, cM, cB } from \"../../../_utils/cssr/index.mjs\";\nimport { fadeInTransition } from \"../../../_styles/transitions/fade-in.cssr.mjs\";\n// vars:\n// --n-bezier\n// --n-opacity-spinning\n// --n-size\n// --n-color\n// --n-text-color\n// --n-font-size\nexport default c([c('@keyframes spin-rotate', `\n from {\n transform: rotate(0);\n }\n to {\n transform: rotate(360deg);\n }\n `), cB('spin-container', `\n position: relative;\n `, [cB('spin-body', `\n position: absolute;\n top: 50%;\n left: 50%;\n transform: translateX(-50%) translateY(-50%);\n `, [fadeInTransition()])]), cB('spin-body', `\n display: inline-flex;\n align-items: center;\n justify-content: center;\n flex-direction: column;\n `), cB('spin', `\n display: inline-flex;\n height: var(--n-size);\n width: var(--n-size);\n font-size: var(--n-size);\n color: var(--n-color);\n `, [cM('rotate', `\n animation: spin-rotate 2s linear infinite;\n `)]), cB('spin-description', `\n display: inline-block;\n font-size: var(--n-font-size);\n color: var(--n-text-color);\n transition: color .3s var(--n-bezier);\n margin-top: 8px;\n `), cB('spin-content', `\n opacity: 1;\n transition: opacity .3s var(--n-bezier);\n pointer-events: all;\n `, [cM('spinning', `\n user-select: none;\n -webkit-user-select: none;\n pointer-events: none;\n opacity: var(--n-opacity-spinning);\n `)])]);","import { computed, defineComponent, h, Transition, ref, watchEffect } from 'vue';\nimport { useCompitable } from 'vooks';\nimport { pxfy } from 'seemly';\nimport { NBaseLoading } from \"../../_internal/index.mjs\";\nimport { useConfig, useTheme, useThemeClass } from \"../../_mixins/index.mjs\";\nimport { createKey, warnOnce } from \"../../_utils/index.mjs\";\nimport { spinLight } from \"../styles/index.mjs\";\nimport style from \"./styles/index.cssr.mjs\";\nconst STROKE_WIDTH = {\n  small: 20,\n  medium: 18,\n  large: 16\n};\nexport const spinProps = Object.assign(Object.assign({}, useTheme.props), {\n  contentClass: String,\n  contentStyle: [Object, String],\n  description: String,\n  stroke: String,\n  size: {\n    type: [String, Number],\n    default: 'medium'\n  },\n  show: {\n    type: Boolean,\n    default: true\n  },\n  strokeWidth: Number,\n  rotate: {\n    type: Boolean,\n    default: true\n  },\n  spinning: {\n    type: Boolean,\n    validator: () => {\n      return true;\n    },\n    default: undefined\n  },\n  delay: Number\n});\nexport default defineComponent({\n  name: 'Spin',\n  props: spinProps,\n  setup(props) {\n    if (process.env.NODE_ENV !== 'production') {\n      watchEffect(() => {\n        if (props.spinning !== undefined) {\n          warnOnce('spin', '`spinning` is deprecated, please use `show` instead.');\n        }\n      });\n    }\n    const {\n      mergedClsPrefixRef,\n      inlineThemeDisabled\n    } = useConfig(props);\n    const themeRef = useTheme('Spin', '-spin', style, spinLight, props, mergedClsPrefixRef);\n    const cssVarsRef = computed(() => {\n      const {\n        size: spinSize\n      } = props;\n      const {\n        common: {\n          cubicBezierEaseInOut\n        },\n        self\n      } = themeRef.value;\n      const {\n        opacitySpinning,\n        color,\n        textColor\n      } = self;\n      const size = typeof spinSize === 'number' ? pxfy(spinSize) : self[createKey('size', spinSize)];\n      return {\n        '--n-bezier': cubicBezierEaseInOut,\n        '--n-opacity-spinning': opacitySpinning,\n        '--n-size': size,\n        '--n-color': color,\n        '--n-text-color': textColor\n      };\n    });\n    const themeClassHandle = inlineThemeDisabled ? useThemeClass('spin', computed(() => {\n      const {\n        size\n      } = props;\n      return typeof size === 'number' ? String(size) : size[0];\n    }), cssVarsRef, props) : undefined;\n    const compitableShow = useCompitable(props, ['spinning', 'show']);\n    const activeRef = ref(false);\n    watchEffect(onCleanup => {\n      let timerId;\n      if (compitableShow.value) {\n        const {\n          delay\n        } = props;\n        if (delay) {\n          timerId = window.setTimeout(() => {\n            activeRef.value = true;\n          }, delay);\n          onCleanup(() => {\n            clearTimeout(timerId);\n          });\n          return;\n        }\n      }\n      activeRef.value = compitableShow.value;\n    });\n    return {\n      mergedClsPrefix: mergedClsPrefixRef,\n      active: activeRef,\n      mergedStrokeWidth: computed(() => {\n        const {\n          strokeWidth\n        } = props;\n        if (strokeWidth !== undefined) return strokeWidth;\n        const {\n          size\n        } = props;\n        return STROKE_WIDTH[typeof size === 'number' ? 'medium' : size];\n      }),\n      cssVars: inlineThemeDisabled ? undefined : cssVarsRef,\n      themeClass: themeClassHandle === null || themeClassHandle === void 0 ? void 0 : themeClassHandle.themeClass,\n      onRender: themeClassHandle === null || themeClassHandle === void 0 ? void 0 : themeClassHandle.onRender\n    };\n  },\n  render() {\n    var _a, _b;\n    const {\n      $slots,\n      mergedClsPrefix,\n      description\n    } = this;\n    const rotate = $slots.icon && this.rotate;\n    const descriptionNode = (description || $slots.description) && h(\"div\", {\n      class: `${mergedClsPrefix}-spin-description`\n    }, description || ((_a = $slots.description) === null || _a === void 0 ? void 0 : _a.call($slots)));\n    const icon = $slots.icon ? h(\"div\", {\n      class: [`${mergedClsPrefix}-spin-body`, this.themeClass]\n    }, h(\"div\", {\n      class: [`${mergedClsPrefix}-spin`, rotate && `${mergedClsPrefix}-spin--rotate`],\n      style: $slots.default ? '' : this.cssVars\n    }, $slots.icon()), descriptionNode) : h(\"div\", {\n      class: [`${mergedClsPrefix}-spin-body`, this.themeClass]\n    }, h(NBaseLoading, {\n      clsPrefix: mergedClsPrefix,\n      style: $slots.default ? '' : this.cssVars,\n      stroke: this.stroke,\n      \"stroke-width\": this.mergedStrokeWidth,\n      class: `${mergedClsPrefix}-spin`\n    }), descriptionNode);\n    (_b = this.onRender) === null || _b === void 0 ? void 0 : _b.call(this);\n    return $slots.default ? h(\"div\", {\n      class: [`${mergedClsPrefix}-spin-container`, this.themeClass],\n      style: this.cssVars\n    }, h(\"div\", {\n      class: [`${mergedClsPrefix}-spin-content`, this.active && `${mergedClsPrefix}-spin-content--spinning`, this.contentClass],\n      style: this.contentStyle\n    }, $slots), h(Transition, {\n      name: \"fade-in-transition\"\n    }, {\n      default: () => this.active ? icon : null\n    })) : icon;\n  }\n});","<template>\n    <div>\n        <div class=\"list-head-div\">\n            <n-card class=\"list-head-card\" content-style=\"padding-top:0;padding-bottom:0;\">\n                <div class=\"list-head-card-content\">\n                    <div class=\"head-num\">#</div>\n                    <div class=\"head-music\">歌曲</div>\n                    <div class=\"head-action\">&nbsp;</div>\n                    <div class=\"head-album\" v-if=\"screenIsWide\">专辑</div>\n                </div>\n            </n-card>\n        </div>\n        <div class=\"list-items\">\n            <!-- 每一项 -->\n            <div v-for=\"(item, index) in props.value\" :key=\"index\" class=\"list-item-div\">\n                <n-card class=\"list-item-card\">\n                    <div class=\"list-item-card-content\">\n                        <!-- 序号 -->\n                        <div class=\"item-num\">{{ index + 1 }}</div>\n                        <!-- 音乐图片 名称 翻译名 艺术家 -->\n                        <div class=\"item-music\" @click=\"props.nameOnClick(item.id)\">\n                            <img class=\"item-music-img\" :src=\"item.al.picUrl + '?param=80y80'\" :alt=\"item.al.name\"\n                                loading=\"lazy\" />\n                            <div class=\"item-music-detail\">\n                                <div class=\"item-music-name\">\n                                    <span class=\"item-music-text\">{{ item.name }}</span>\n                                    <span class=\"item-music-text\" style=\"color: #b3b3b3;\"\n                                        v-if=\"api.parseArray(item.tns) != ''\">&nbsp;({{ api.parseArray(item.tns)\n                                        }})</span>\n                                </div>\n\n                                <div class=\"item-music-ar\">\n                                    <n-tag v-if=\"item.fee == 1\" type=\"warning\" size=\"small\"\n                                        :bordered=\"false\">VIP</n-tag>\n                                    <n-tag v-if=\"item.fee == 4\" type=\"info\" size=\"small\" :bordered=\"false\">数字专辑</n-tag>\n                                    <span class=\"item-music-text\" style=\"color: #8b968d;\">{{ api.parseArtist(item.ar)\n                                        }}</span>\n                                </div>\n                            </div>\n                        </div>\n                        <!-- 动作 比如收藏 -->\n                        <div class=\"item-action\">\n                            <n-icon size=\"1.3rem\" class=\"like-button\">\n                                <i-ant-design-heart-outlined v-show=\"!isLiked[index]\"\n                                    @click=\"api.likeAndUpdateLikelist(item.id, true)\" />\n                                <i-ant-design-heart-filled v-show=\"isLiked[index]\"\n                                    @click=\"api.likeAndUpdateLikelist(item.id, false)\" />\n                            </n-icon>\n                        </div>\n                        <!-- 专辑 -->\n                        <div class=\"item-album\" v-if=\"screenIsWide\">\n                            <span class=\"item-album-al\">\n                                <span>{{ item.al.name }}</span>\n                            </span>\n                        </div>\n                    </div>\n                </n-card>\n            </div>\n        </div>\n\n    </div>\n</template>\n\n<script setup name=\"musicList\">\nimport { ref, computed } from 'vue';\nimport { useUserStore } from '@/stores/user';\nimport * as api from '@/modules/api';\nlet props = defineProps(['value', 'nameOnClick']);\nlet userStore = useUserStore();\nlet windowWidth = ref(window.innerWidth);\nwindow.addEventListener('resize', () => {\n    windowWidth.value = window.innerWidth;\n})\nlet screenIsWide = computed(() => {//不如媒体查询\n    return windowWidth.value > 700;\n})\nlet isLiked = computed(() => {\n    let isLikedList = []\n    for (let i = 0; i < props.value.length; i++) {\n        isLikedList[i] = userStore.likedSongs.includes(Number(props.value[i].id))\n    }\n    return isLikedList\n})\n\n</script>\n\n<style scoped>\n.head-num,\n.item-num {\n    width: 2rem;\n}\n\n.head-music,\n.item-music {\n    flex: 2;\n    width: 60%;\n}\n\n.item-music-name,\n.item-music-ar,\n.item-music-text {\n    overflow: hidden;\n    white-space: nowrap;\n    text-overflow: ellipsis;\n}\n\n.head-action,\n.item-action {\n    width: 1.5rem;\n}\n\n.head-album,\n.item-album {\n    flex: 1;\n    padding-left: 1rem;\n}\n\n.list-head-card {\n    border: none;\n    padding: 0;\n}\n\n.list-head-div,\n.list-item-div {\n    margin: 0.5rem;\n    margin-bottom: 0;\n}\n\n.list-item-card-content,\n.list-head-card-content {\n    display: flex;\n    flex-direction: row;\n    align-items: center;\n}\n\n.item-music-detail {\n    display: flex;\n    justify-content: center;\n    flex-direction: column;\n    width:calc(100% - 6rem);\n}\n\n.item-music {\n    display: flex;\n    cursor: pointer;\n}\n\n.item-music-img {\n    width: 2.8rem;\n    height: 2.8rem;\n    border-radius: 0.5rem;\n    border: 1px solid rgba(0, 0, 0, 0.2);\n    margin-right: 1rem;\n}\n\n.like-button {\n    cursor: pointer;\n}\n</style>"],"names":["self","vars","opacityDisabled","heightTiny","heightSmall","heightMedium","heightLarge","heightHuge","primaryColor","fontSize","spinLight","commonLight","style","c","cB","fadeInTransition","cM","STROKE_WIDTH","spinProps","useTheme","__unplugin_components_2","defineComponent","props","mergedClsPrefixRef","inlineThemeDisabled","useConfig","themeRef","cssVarsRef","computed","spinSize","cubicBezierEaseInOut","opacitySpinning","color","textColor","size","pxfy","createKey","themeClassHandle","useThemeClass","compitableShow","useCompitable","activeRef","ref","watchEffect","onCleanup","timerId","delay","strokeWidth","_a","_b","$slots","mergedClsPrefix","description","rotate","descriptionNode","h","icon","NBaseLoading","Transition","__props","userStore","useUserStore","windowWidth","screenIsWide","isLiked","isLikedList","i"],"mappings":"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","x_google_ignoreList":[0,1,2]}