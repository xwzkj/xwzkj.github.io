import{H as B,a5 as C,r as m,w as N,o as U,b8 as x,b9 as A,I as l,J as i,V as a,K as s,R as r,U as c,L,M,Y as u,P as v,O as V,Q as g,_ as b}from"./index-C8Rv2UfX.js";import{m as P,_ as T}from"./musicList-BGOol1gT.js";import{_ as z}from"./plugin-vueexport-helper-DPNJMZh_.js";import{B as O}from"./Button-C9ObdyQo.js";import"./use-compitable-B6foRg2G.js";import"./heart-outlined-Bb2TfC_8.js";import"./Card-BVc7eIun.js";const R={key:"playlst-content"},$={id:"playlistDetail"},E=["src"],F={id:"playlistInfo"},H={id:"playlistName"},J={key:0,id:"playlistAuthor"},K=["src"],Q={id:"playlistAuthorName"},Y={id:"playlistTagContainer"},j={id:"playlistDesc"},q={id:"playlistControler"},G={id:"playlistMusicList"},W={class:"playlist-spin",key:"playlst-spin"},X={__name:"playlist",props:["id","isDailySongs"],setup(h){const n=B(),_=C();let o=m(!1),t=m([]),p=h;N(p,()=>{console.log("playlist组件props被更新"),t.value={},y()},{deep:!0}),U(()=>{console.log("playlist组件被挂载"),y()});async function y(){if(p.isDailySongs){let e=await x(),d=new Date;t.value={tracks:e.data.data.dailySongs,name:`${d.getMonth()+1}/${d.getDate()} 每日推荐`,description:"根据你的音乐口味生成，每天06:00更新",coverImgUrl:e.data.data.dailySongs[0].al.picUrl,tags:["每日推荐"]}}else{let e=await A(p.id);t.value=e.data.playlist}}async function f(){o.value=!0,await n.playlistInit(null,t.value.tracks),n.play(!0),_.push({name:"player"}),o.value=!1}async function k(e){o.value=!0,await n.addMusic([e],0,!0),n.play(!0),_.push({name:"player"}),o.value=!1}return(e,d)=>{const w=b,D=O,I=T;return l(),i("div",null,[a(t).tracks&&!a(o)?(l(),i("div",R,[s("div",$,[a(t).coverImgUrl?(l(),i("img",{key:0,id:"playlistImg",src:a(t).coverImgUrl},null,8,E)):r("",!0),s("div",F,[s("div",H,c(a(t).name),1),a(t).creator?(l(),i("div",J,[s("img",{id:"playlistAuthorAvatar",src:a(t).creator.avatarUrl},null,8,K),s("div",Q,c(a(t).creator.nickname),1),s("span",Y,[(l(!0),i(L,null,M(a(t).tags,S=>(l(),V(w,{type:"success",size:"small",class:"playlistTag"},{default:v(()=>[g(c(S),1)]),_:2},1024))),256))])])):r("",!0),s("div",j,c(a(t).description),1),s("div",q,[u(D,{onClick:f},{default:v(()=>[g("播放全部")]),_:1})])])]),s("div",G,[u(P,{value:a(t).tracks,nameOnClick:k},null,8,["value"])])])):r("",!0),!a(t).tracks||a(o)?(l(),i("div",W,[u(I,{size:"large"})])):r("",!0)])}}},it=z(X,[["__scopeId","data-v-aff4b919"]]);export{it as default};
