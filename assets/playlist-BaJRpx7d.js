import{H as C,a5 as N,r as g,w as U,o as x,av as A,aw as L,I as l,J as i,V as a,K as s,R as r,U as c,L as M,M as V,Y as p,P as u,O as P,Q as m,_ as T}from"./index-CiBibxjP.js";import{m as b,_ as z}from"./musicList-C4yxzAJd.js";import{_ as O}from"./plugin-vueexport-helper-Bcv8_rOQ.js";import{B as R}from"./Button-BEhVFeVs.js";import{_ as $}from"./Ellipsis-C3dw2fbY.js";import"./use-compitable-DzE_j5PX.js";import"./heart-outlined-BtcCkagU.js";import"./Card-n_MwDkZG.js";import"./Follower-CqcCaWUm.js";import"./index-B6djFG6C.js";const E={key:"playlst-content"},F={id:"playlistDetail"},H=["src"],J={id:"playlistInfo"},K={id:"playlistName"},Q={key:0,id:"playlistAuthor"},Y=["src"],j={id:"playlistAuthorName"},q={id:"playlistTagContainer"},G={class:"playlist-desc"},W={id:"playlistControler"},X={id:"playlistMusicList"},Z={class:"playlist-spin",key:"playlst-spin"},tt={__name:"playlist",props:["id","isDailySongs"],setup(h){const n=C(),y=N();let o=g(!1),t=g([]),_=h;U(_,()=>{console.log("playlist组件props被更新"),t.value={},v()},{deep:!0}),x(()=>{console.log("playlist组件被挂载"),v()});async function v(){if(_.isDailySongs){let e=await A(),d=new Date;t.value={tracks:e.data.data.dailySongs,name:`${d.getMonth()+1}/${d.getDate()} 每日推荐`,description:"根据你的音乐口味生成，每天06:00更新",coverImgUrl:e.data.data.dailySongs[0].al.picUrl,tags:["每日推荐"]}}else{let e=await L(_.id);t.value=e.data.playlist}}async function f(){o.value=!0,await n.playlistInit(null,t.value.tracks),n.play(!0),y.push({name:"player"}),o.value=!1}async function k(e){o.value=!0,await n.addMusic([e],0,!0),n.play(!0),y.push({name:"player"}),o.value=!1}return(e,d)=>{const w=T,I=$,S=R,D=z;return l(),i("div",null,[a(t).tracks&&!a(o)?(l(),i("div",E,[s("div",F,[a(t).coverImgUrl?(l(),i("img",{key:0,id:"playlistImg",src:a(t).coverImgUrl},null,8,H)):r("",!0),s("div",J,[s("div",K,c(a(t).name),1),a(t).creator?(l(),i("div",Q,[s("img",{id:"playlistAuthorAvatar",src:a(t).creator.avatarUrl},null,8,Y),s("div",j,c(a(t).creator.nickname),1),s("span",q,[(l(!0),i(M,null,V(a(t).tags,B=>(l(),P(w,{type:"success",size:"small",class:"playlistTag"},{default:u(()=>[m(c(B),1)]),_:2},1024))),256))])])):r("",!0),s("div",G,[p(I,{"line-clamp":3},{default:u(()=>[m(c(a(t).description),1)]),_:1})]),s("div",W,[p(S,{onClick:f},{default:u(()=>[m("播放全部")]),_:1})])])]),s("div",X,[p(b,{value:a(t).tracks,nameOnClick:k},null,8,["value"])])])):r("",!0),!a(t).tracks||a(o)?(l(),i("div",Z,[p(D,{size:"large"})])):r("",!0)])}}},_t=O(tt,[["__scopeId","data-v-18c67b34"]]);export{_t as default};
