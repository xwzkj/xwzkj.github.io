{"version":3,"file":"search-BFdCHv2j.js","sources":["../../src/pages/search.vue"],"sourcesContent":["<template>\n    <div v-show=\"result\">\n        <musicList v-if=\"result\" :value=\"result\" :nameOnClick=\"play\" />\n    </div>\n    <n-spin v-if=\"!result\" class=\"loading-center\" />\n\n</template>\n<script setup name=\"search\">\nimport * as api from '@/modules/api.js'\nimport { useRouter } from 'vue-router'\nimport { ref, onMounted, watch } from 'vue'\nimport musicList from '@/components/musicList.vue'\nimport { usePlayStore } from '@/stores/play'\nlet playStore = usePlayStore();\nlet router = useRouter();\nlet props = defineProps(['keyword']);\nlet result = ref('');\nwatch(props, (value) => {\n    // console.log('search.vue props变化');\n    search();\n}, { deep: true })\nonMounted(() => {\n    // console.log('search.vue组件被挂载');\n    search();\n})\n// console.log('search.vue script执行');\n\n\nasync function search() {\n    result.value = null;\n    let res = await api.cloudsearch(props.keyword)\n    // console.log('搜索/cloudsearch', res.data);\n    result.value = res.data.result.songs;\n}\nasync function play(id) {\n    await playStore.addMusic([id], 0, true);\n    playStore.play(true);\n    router.push({ name: 'player' })\n}\n</script>\n<style scoped>\n.loading-center {\n    width: 100%;\n    height: 70vh;\n    display: flex;\n    justify-content: center;\n    align-items: center;\n}\n\n.result-li {\n    display: flex;\n    align-items: center;\n    justify-content: space-around;\n}\n\n.result-name {\n    flex: 35%;\n    flex-wrap: nowrap;\n    cursor: pointer;\n}\n\n.result-ar {\n    flex: 20%;\n    flex-wrap: nowrap;\n    height: 100%;\n}\n\n.result-img {\n    width: 2rem;\n    border-radius: 0.5rem;\n}\n\n.result-al {\n    flex: 20%;\n}\n\n.result-dt {\n    flex: 10%;\n}\n\n.result {\n    padding: 0.2rem;\n    display: flex;\n    font-size: 1rem;\n\n}\n</style>"],"names":["playStore","usePlayStore","router","useRouter","props","__props","result","ref","watch","value","search","onMounted","res","api.cloudsearch","play","id"],"mappings":"kdAaA,IAAIA,EAAYC,EAAY,EACxBC,EAASC,EAAS,EAClBC,EAAQC,EACRC,EAASC,EAAI,EAAE,EACnBC,EAAMJ,EAAQK,GAAU,CAEpBC,GACJ,EAAG,CAAE,KAAM,GAAM,EACjBC,EAAU,IAAM,CAEZD,GACJ,CAAC,EAID,eAAeA,GAAS,CACpBJ,EAAO,MAAQ,KACf,IAAIM,EAAM,MAAMC,EAAgBT,EAAM,OAAO,EAE7CE,EAAO,MAAQM,EAAI,KAAK,OAAO,KACnC,CACA,eAAeE,EAAKC,EAAI,CACpB,MAAMf,EAAU,SAAS,CAACe,CAAE,EAAG,EAAG,EAAI,EACtCf,EAAU,KAAK,EAAI,EACnBE,EAAO,KAAK,CAAE,KAAM,QAAQ,CAAE,CAClC"}