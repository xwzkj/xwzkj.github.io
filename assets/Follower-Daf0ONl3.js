import{r as B,bv as H,w as z,o as q,a as S,bn as A,f as w,ac as _,ad as Z,aZ as W,Q as ce,L as me,ar as xe,e as V,p as ve,bw as be,k as te,bx as ye,D as O,g as we,l as X,by as $e,bz as Me,aa as ge,B as ze}from"./index-CERPLgqX.js";let Y=[];const ne=new WeakMap;function Ie(){Y.forEach(n=>n(...ne.get(n))),Y=[]}function Be(n,...e){ne.set(n,e),!Y.includes(n)&&Y.push(n)===1&&requestAnimationFrame(Ie)}function Ae(n){const e=B(!!n.value);if(e.value)return H(e);const t=z(n,o=>{o&&(e.value=!0,t())});return H(e)}const Ce=typeof window<"u";let g,I;const Ee=()=>{var n,e;g=Ce?(e=(n=document)===null||n===void 0?void 0:n.fonts)===null||e===void 0?void 0:e.ready:void 0,I=!1,g!==void 0?g.then(()=>{I=!0}):I=!0};Ee();function Ze(n){if(I)return;let e=!1;q(()=>{I||g==null||g.then(()=>{e||n()})}),S(()=>{e=!0})}const Oe=A("n-internal-select-menu-body"),Xe=A("n-modal-body"),Ye=A("n-drawer-body"),He=A("n-drawer"),Se=A("n-popover-body"),oe="__disabled__";function re(n){const e=w(Xe,null),t=w(Ye,null),o=w(Se,null),r=w(Oe,null),h=B();if(typeof document<"u"){h.value=document.fullscreenElement;const d=()=>{h.value=document.fullscreenElement};q(()=>{_("fullscreenchange",document,d)}),S(()=>{Z("fullscreenchange",document,d)})}return W(()=>{var d;const{to:f}=n;return f!==void 0?f===!1?oe:f===!0?h.value||"body":f:e!=null&&e.value?(d=e.value.$el)!==null&&d!==void 0?d:e.value:t!=null&&t.value?t.value:o!=null&&o.value?o.value:r!=null&&r.value?r.value:f??(h.value||"body")})}re.tdkey=oe;re.propTo={type:[String,Object,Boolean],default:void 0};function k(n,e,t="default"){const o=e[t];if(o===void 0)throw new Error(`[vueuc/${n}]: slot[${t}] is empty.`);return o()}function K(n,e=!0,t=[]){return n.forEach(o=>{if(o!==null){if(typeof o!="object"){(typeof o=="string"||typeof o=="number")&&t.push(ce(String(o)));return}if(Array.isArray(o)){K(o,e,t);return}if(o.type===me){if(o.children===null)return;Array.isArray(o.children)&&K(o.children,e,t)}else o.type!==xe&&t.push(o)}}),t}function J(n,e,t="default"){const o=e[t];if(o===void 0)throw new Error(`[vueuc/${n}]: slot[${t}] is empty.`);const r=K(o());if(r.length===1)return r[0];throw new Error(`[vueuc/${n}]: slot[${t}] should have exactly one child.`)}let y=null;function ie(){if(y===null&&(y=document.getElementById("v-binder-view-measurer"),y===null)){y=document.createElement("div"),y.id="v-binder-view-measurer";const{style:n}=y;n.position="fixed",n.left="0",n.right="0",n.top="0",n.bottom="0",n.pointerEvents="none",n.visibility="hidden",document.body.appendChild(y)}return y.getBoundingClientRect()}function Ve(n,e){const t=ie();return{top:e,left:n,height:0,width:0,right:t.width-n,bottom:t.height-e}}function T(n){const e=n.getBoundingClientRect(),t=ie();return{left:e.left-t.left,top:e.top-t.top,bottom:t.height+t.top-e.bottom,right:t.width+t.left-e.right,width:e.width,height:e.height}}function je(n){return n.nodeType===9?null:n.parentNode}function se(n){if(n===null)return null;const e=je(n);if(e===null)return null;if(e.nodeType===9)return document;if(e.nodeType===1){const{overflow:t,overflowX:o,overflowY:r}=getComputedStyle(e);if(/(auto|scroll|overlay)/.test(t+r+o))return e}return se(e)}const Je=V({name:"Binder",props:{syncTargetWithParent:Boolean,syncTarget:{type:Boolean,default:!0}},setup(n){var e;ve("VBinder",(e=be())===null||e===void 0?void 0:e.proxy);const t=w("VBinder",null),o=B(null),r=s=>{o.value=s,t&&n.syncTargetWithParent&&t.setTargetRef(s)};let h=[];const d=()=>{let s=o.value;for(;s=se(s),s!==null;)h.push(s);for(const x of h)_("scroll",x,v,!0)},f=()=>{for(const s of h)Z("scroll",s,v,!0);h=[]},l=new Set,m=s=>{l.size===0&&d(),l.has(s)||l.add(s)},b=s=>{l.has(s)&&l.delete(s),l.size===0&&f()},v=()=>{Be(i)},i=()=>{l.forEach(s=>s())},u=new Set,p=s=>{u.size===0&&_("resize",window,c),u.has(s)||u.add(s)},a=s=>{u.has(s)&&u.delete(s),u.size===0&&Z("resize",window,c)},c=()=>{u.forEach(s=>s())};return S(()=>{Z("resize",window,c),f()}),{targetRef:o,setTargetRef:r,addScrollListener:m,removeScrollListener:b,addResizeListener:p,removeResizeListener:a}},render(){return k("binder",this.$slots)}}),Ne=V({name:"Target",setup(){const{setTargetRef:n,syncTarget:e}=w("VBinder");return{syncTarget:e,setTargetDirective:{mounted:n,updated:n}}},render(){const{syncTarget:n,setTargetDirective:e}=this;return n?te(J("follower",this.$slots),[[e]]):J("follower",this.$slots)}});function Le(n,e){console.error(`[vdirs/${n}]: ${e}`)}class Te{constructor(){this.elementZIndex=new Map,this.nextZIndex=2e3}get elementCount(){return this.elementZIndex.size}ensureZIndex(e,t){const{elementZIndex:o}=this;if(t!==void 0){e.style.zIndex=`${t}`,o.delete(e);return}const{nextZIndex:r}=this;o.has(e)&&o.get(e)+1===this.nextZIndex||(e.style.zIndex=`${r}`,o.set(e,r),this.nextZIndex=r+1,this.squashState())}unregister(e,t){const{elementZIndex:o}=this;o.has(e)?o.delete(e):t===void 0&&Le("z-index-manager/unregister-element","Element not found when unregistering."),this.squashState()}squashState(){const{elementCount:e}=this;e||(this.nextZIndex=2e3),this.nextZIndex-e>2500&&this.rearrange()}rearrange(){const e=Array.from(this.elementZIndex.entries());e.sort((t,o)=>t[1]-o[1]),this.nextZIndex=2e3,e.forEach(t=>{const o=t[0],r=this.nextZIndex++;`${r}`!==o.style.zIndex&&(o.style.zIndex=`${r}`)})}}const F=new Te,M="@@ziContext",Fe={mounted(n,e){const{value:t={}}=e,{zIndex:o,enabled:r}=t;n[M]={enabled:!!r,initialized:!1},r&&(F.ensureZIndex(n,o),n[M].initialized=!0)},updated(n,e){const{value:t={}}=e,{zIndex:o,enabled:r}=t,h=n[M].enabled;r&&!h&&(F.ensureZIndex(n,o),n[M].initialized=!0),n[M].enabled=!!r},unmounted(n,e){if(!n[M].initialized)return;const{value:t={}}=e,{zIndex:o}=t;F.unregister(n,o)}},{c:C}=ye(),De="vueuc-style",_e=V({name:"LazyTeleport",props:{to:{type:[String,Object],default:void 0},disabled:Boolean,show:{type:Boolean,required:!0}},setup(n){return{showTeleport:Ae(O(n,"show")),mergedTo:we(()=>{const{to:e}=n;return e??"body"})}},render(){return this.showTeleport?this.disabled?k("lazy-teleport",this.$slots):X($e,{disabled:this.disabled,to:this.mergedTo},k("lazy-teleport",this.$slots)):null}}),E={top:"bottom",bottom:"top",left:"right",right:"left"},N={start:"end",center:"center",end:"start"},D={top:"height",bottom:"height",left:"width",right:"width"},We={"bottom-start":"top left",bottom:"top center","bottom-end":"top right","top-start":"bottom left",top:"bottom center","top-end":"bottom right","right-start":"top left",right:"center left","right-end":"bottom left","left-start":"top right",left:"center right","left-end":"bottom right"},ke={"bottom-start":"bottom left",bottom:"bottom center","bottom-end":"bottom right","top-start":"top left",top:"top center","top-end":"top right","right-start":"top right",right:"center right","right-end":"bottom right","left-start":"top left",left:"center left","left-end":"bottom left"},Ke={"bottom-start":"right","bottom-end":"left","top-start":"right","top-end":"left","right-start":"bottom","right-end":"top","left-start":"bottom","left-end":"top"},R={top:!0,bottom:!1,left:!0,right:!1},ee={top:"end",bottom:"start",left:"end",right:"start"};function qe(n,e,t,o,r,h){if(!r||h)return{placement:n,top:0,left:0};const[d,f]=n.split("-");let l=f??"center",m={top:0,left:0};const b=(u,p,a)=>{let c=0,s=0;const x=t[u]-e[p]-e[u];return x>0&&o&&(a?s=R[p]?x:-x:c=R[p]?x:-x),{left:c,top:s}},v=d==="left"||d==="right";if(l!=="center"){const u=Ke[n],p=E[u],a=D[u];if(t[a]>e[a]){if(e[u]+e[a]<t[a]){const c=(t[a]-e[a])/2;e[u]<c||e[p]<c?e[u]<e[p]?(l=N[f],m=b(a,p,v)):m=b(a,u,v):l="center"}}else t[a]<e[a]&&e[p]<0&&e[u]>e[p]&&(l=N[f])}else{const u=d==="bottom"||d==="top"?"left":"top",p=E[u],a=D[u],c=(t[a]-e[a])/2;(e[u]<c||e[p]<c)&&(e[u]>e[p]?(l=ee[u],m=b(a,u,v)):(l=ee[p],m=b(a,p,v)))}let i=d;return e[d]<t[D[d]]&&e[d]<e[E[d]]&&(i=E[d]),{placement:l!=="center"?`${i}-${l}`:i,left:m.left,top:m.top}}function Pe(n,e){return e?ke[n]:We[n]}function Ue(n,e,t,o,r,h){if(h)switch(n){case"bottom-start":return{top:`${Math.round(t.top-e.top+t.height)}px`,left:`${Math.round(t.left-e.left)}px`,transform:"translateY(-100%)"};case"bottom-end":return{top:`${Math.round(t.top-e.top+t.height)}px`,left:`${Math.round(t.left-e.left+t.width)}px`,transform:"translateX(-100%) translateY(-100%)"};case"top-start":return{top:`${Math.round(t.top-e.top)}px`,left:`${Math.round(t.left-e.left)}px`,transform:""};case"top-end":return{top:`${Math.round(t.top-e.top)}px`,left:`${Math.round(t.left-e.left+t.width)}px`,transform:"translateX(-100%)"};case"right-start":return{top:`${Math.round(t.top-e.top)}px`,left:`${Math.round(t.left-e.left+t.width)}px`,transform:"translateX(-100%)"};case"right-end":return{top:`${Math.round(t.top-e.top+t.height)}px`,left:`${Math.round(t.left-e.left+t.width)}px`,transform:"translateX(-100%) translateY(-100%)"};case"left-start":return{top:`${Math.round(t.top-e.top)}px`,left:`${Math.round(t.left-e.left)}px`,transform:""};case"left-end":return{top:`${Math.round(t.top-e.top+t.height)}px`,left:`${Math.round(t.left-e.left)}px`,transform:"translateY(-100%)"};case"top":return{top:`${Math.round(t.top-e.top)}px`,left:`${Math.round(t.left-e.left+t.width/2)}px`,transform:"translateX(-50%)"};case"right":return{top:`${Math.round(t.top-e.top+t.height/2)}px`,left:`${Math.round(t.left-e.left+t.width)}px`,transform:"translateX(-100%) translateY(-50%)"};case"left":return{top:`${Math.round(t.top-e.top+t.height/2)}px`,left:`${Math.round(t.left-e.left)}px`,transform:"translateY(-50%)"};case"bottom":default:return{top:`${Math.round(t.top-e.top+t.height)}px`,left:`${Math.round(t.left-e.left+t.width/2)}px`,transform:"translateX(-50%) translateY(-100%)"}}switch(n){case"bottom-start":return{top:`${Math.round(t.top-e.top+t.height+o)}px`,left:`${Math.round(t.left-e.left+r)}px`,transform:""};case"bottom-end":return{top:`${Math.round(t.top-e.top+t.height+o)}px`,left:`${Math.round(t.left-e.left+t.width+r)}px`,transform:"translateX(-100%)"};case"top-start":return{top:`${Math.round(t.top-e.top+o)}px`,left:`${Math.round(t.left-e.left+r)}px`,transform:"translateY(-100%)"};case"top-end":return{top:`${Math.round(t.top-e.top+o)}px`,left:`${Math.round(t.left-e.left+t.width+r)}px`,transform:"translateX(-100%) translateY(-100%)"};case"right-start":return{top:`${Math.round(t.top-e.top+o)}px`,left:`${Math.round(t.left-e.left+t.width+r)}px`,transform:""};case"right-end":return{top:`${Math.round(t.top-e.top+t.height+o)}px`,left:`${Math.round(t.left-e.left+t.width+r)}px`,transform:"translateY(-100%)"};case"left-start":return{top:`${Math.round(t.top-e.top+o)}px`,left:`${Math.round(t.left-e.left+r)}px`,transform:"translateX(-100%)"};case"left-end":return{top:`${Math.round(t.top-e.top+t.height+o)}px`,left:`${Math.round(t.left-e.left+r)}px`,transform:"translateX(-100%) translateY(-100%)"};case"top":return{top:`${Math.round(t.top-e.top+o)}px`,left:`${Math.round(t.left-e.left+t.width/2+r)}px`,transform:"translateY(-100%) translateX(-50%)"};case"right":return{top:`${Math.round(t.top-e.top+t.height/2+o)}px`,left:`${Math.round(t.left-e.left+t.width+r)}px`,transform:"translateY(-50%)"};case"left":return{top:`${Math.round(t.top-e.top+t.height/2+o)}px`,left:`${Math.round(t.left-e.left+r)}px`,transform:"translateY(-50%) translateX(-100%)"};case"bottom":default:return{top:`${Math.round(t.top-e.top+t.height+o)}px`,left:`${Math.round(t.left-e.left+t.width/2+r)}px`,transform:"translateX(-50%)"}}}const Qe=C([C(".v-binder-follower-container",{position:"absolute",left:"0",right:"0",top:"0",height:"0",pointerEvents:"none",zIndex:"auto"}),C(".v-binder-follower-content",{position:"absolute",zIndex:"auto"},[C("> *",{pointerEvents:"all"})])]),Re=V({name:"Follower",inheritAttrs:!1,props:{show:Boolean,enabled:{type:Boolean,default:void 0},placement:{type:String,default:"bottom"},syncTrigger:{type:Array,default:["resize","scroll"]},to:[String,Object],flip:{type:Boolean,default:!0},internalShift:Boolean,x:Number,y:Number,width:String,minWidth:String,containerClass:String,teleportDisabled:Boolean,zindexable:{type:Boolean,default:!0},zIndex:Number,overlap:Boolean},setup(n){const e=w("VBinder"),t=W(()=>n.enabled!==void 0?n.enabled:n.show),o=B(null),r=B(null),h=()=>{const{syncTrigger:i}=n;i.includes("scroll")&&e.addScrollListener(l),i.includes("resize")&&e.addResizeListener(l)},d=()=>{e.removeScrollListener(l),e.removeResizeListener(l)};q(()=>{t.value&&(l(),h())});const f=Me();Qe.mount({id:"vueuc/binder",head:!0,anchorMetaName:De,ssr:f}),S(()=>{d()}),Ze(()=>{t.value&&l()});const l=()=>{if(!t.value)return;const i=o.value;if(i===null)return;const u=e.targetRef,{x:p,y:a,overlap:c}=n,s=p!==void 0&&a!==void 0?Ve(p,a):T(u);i.style.setProperty("--v-target-width",`${Math.round(s.width)}px`),i.style.setProperty("--v-target-height",`${Math.round(s.height)}px`);const{width:x,minWidth:j,placement:P,internalShift:le,flip:ue}=n;i.setAttribute("v-placement",P),c?i.setAttribute("v-overlap",""):i.removeAttribute("v-overlap");const{style:$}=i;x==="target"?$.width=`${s.width}px`:x!==void 0?$.width=x:$.width="",j==="target"?$.minWidth=`${s.width}px`:j!==void 0?$.minWidth=j:$.minWidth="";const de=T(i),ae=T(r.value),{left:U,top:Q,placement:L}=qe(P,s,de,le,ue,c),G=Pe(L,c),{left:he,top:pe,transform:fe}=Ue(L,ae,s,Q,U,c);i.setAttribute("v-placement",L),i.style.setProperty("--v-offset-left",`${Math.round(U)}px`),i.style.setProperty("--v-offset-top",`${Math.round(Q)}px`),i.style.transform=`translateX(${he}) translateY(${pe}) ${fe}`,i.style.setProperty("--v-transform-origin",G),i.style.transformOrigin=G};z(t,i=>{i?(h(),m()):d()});const m=()=>{ge().then(l).catch(i=>console.error(i))};["placement","x","y","internalShift","flip","width","overlap","minWidth"].forEach(i=>{z(O(n,i),l)}),["teleportDisabled"].forEach(i=>{z(O(n,i),m)}),z(O(n,"syncTrigger"),i=>{i.includes("resize")?e.addResizeListener(l):e.removeResizeListener(l),i.includes("scroll")?e.addScrollListener(l):e.removeScrollListener(l)});const b=ze(),v=W(()=>{const{to:i}=n;if(i!==void 0)return i;b.value});return{VBinder:e,mergedEnabled:t,offsetContainerRef:r,followerRef:o,mergedTo:v,syncPosition:l}},render(){return X(_e,{show:this.show,to:this.mergedTo,disabled:this.teleportDisabled},{default:()=>{var n,e;const t=X("div",{class:["v-binder-follower-container",this.containerClass],ref:"offsetContainerRef"},[X("div",{class:"v-binder-follower-content",ref:"followerRef"},(e=(n=this.$slots).default)===null||e===void 0?void 0:e.call(n))]);return this.zindexable?te(t,[[Fe,{enabled:this.mergedEnabled,zIndex:this.zIndex}]]):t}})}});export{Je as B,_e as L,Ne as V,Ye as a,Re as b,He as d,Xe as m,Se as p,re as u,Fe as z};
